Linux Exercises
===============

### 1. Go to your home directory and create a directory called `level_0`.

    $ cd ~
    $ mkdir level_0

### 2. Change directory to `level_0`.

    $ cd level_0

### 3. Find the name of the present working directory.

    $ pwd

### 4. Make a directory `level_1`, and move to it.

    $ mkdir level_1
    $ cd level_1

### 5. Create a file called `foo.txt` with contents `This file contains the word bar`.

    $ echo "This file contains the word bar" > foo.txt

### 6. Add another line in `foo.txt` with contents `This is the second line`.

    $ echo "This is the second line" >> foo.txt

### 7. Print the contents of foo.txt to the screen.

    $ more foo.txt

### 8. Search for the word bar in `foo.txt`.

    $ grep "bar" foo.txt

### 9. Go up one level, then remove the directory `level_1` (and its contents).

    $ cd ..
    $ rm -r level_1

### 10. Find the location of your python installation.

    $ which python

### 11. Find the values of the environment variables `PATH` and `LD_LIBRARY_PATH`.

    $ echo $PATH
    $ echo $LD_LIBRARY_PATH

### 12. Set the environment variable `MY_VAR` to equal the absolute path to `level_0`, and test that it has worked OK.

    $ setenv MY_VAR $PWD (tcsh) or
    $ export $MYVAR=$PWD (bash)
    $ echo $MY_VAR

### 13. Add (i.e append) to the `PATH` the absolute path to `level_0`, and test that it has worked OK.

    $ setenv PATH ${PATH}:$PWD (tcsh) or
    $ export PATH=${PATH}:$PWD (bash)
    $ echo $PATH

### 14. Use the man command to find the option of `ls` that shows file sizes in human readable format.

    $ man ls
    ## the answer is ls -lh

### 15. Find the hostname, processor type & operating system version and write this info into a text file called `info.txt`.

    $ uname -a > info.txt

### 16. List the people who are logged into the system.

    # who

### 17. Find the process that is using the most CPU at the moment.

    # top

### 18. Find the IDs of the processes that you are running.

  # ps -U your_user_name


Matplotlib exercise
===================



	import numpy as np
	import astropy.io.fits as pyfits
	import matplotlib.pyplot as plt

	h = pyfits.open("/share/splinter/ucapwhi/Linux_training/demo.fits.gz")

	plt.scatter(h[1].data.field("rMAG"), h[1].data.field("Dist"))
	plt.show()


	plt.scatter(h[1].data.field("RAdeg"), h[1].data.field("DEdeg"), s=1)
	plt.show()


First plot: Dimmer objects are to the right. The straight top and right edges show that a larger data set has been filtered by distance and absolute magnitude, to give a sample that is complete (all objects of at least a certain brightness within a certain distance).

Second plot: The lower density at the top is just a projection effect - the RA/DEC projection doesn't properly represent area on the celestial sphere. Also, RA on the sky increases from right to left.


HPC Exercises
=============

## 1. Login to `splinter` and find the path to your `$HOME` directory and your quota

    $ ssh -X user-name@splinter-login.star.ucl.ac.uk
    $ pwd
    $ quota

## 2. Request an interative queue and find the node in which you are in

    $ qsub -I
    $ hostname

## 3. In the interative queue and run `ipython`

    $ module load dev_tools/nov2014/python-anaconda
    $ ipython

## 4. Write a job script run a `hello world` in python and submit to the queue

The script `my_job_script.csh` is below is below

    #!/bin/tcsh
    #PBS -q compute
    #PBS -N hello_world
    #PBS -l nodes=1:ppn=1
    #PBS -l mem=1gb
    #PBS -l walltime=00:01:00

    module load dev_tools/nov2014/python-anaconda
    
    python -c "print 'hello'"

The submission is below

    $ qsub my_job_script.csh

Make sure that you see the output on job completion

## 5. In the above `hello world` example, specify the output to a file

Add the following `PBS` command to the script

    #!/bin/tcsh
    #PBS -q compute
    #PBS -N hello_world
    #PBS -l nodes=1:ppn=1
    #PBS -l mem=1gb
    #PBS -l walltime=00:01:00
    #PBS -o /home/sbalan/hello_world.out

    module load dev_tools/nov2014/python-anaconda
    
    python -c "print 'hello'"

## 6. Using the above example, check the job status using `qstat` and `checkjob`

    $ qstat
    $ checkjob job-id

## 7. Add python module to your login script

    $ cd ~
    $ echo "module load dev_tools/nov2014/python-anaconda" >> .login

## 8. Create a work directory in `/share/splinter/user_name/` and give access to everyone

    $ cd /share/splinter/user_name
    $ mkdir work_dir
    $ chmod 777 work_dir

## 9. Clone [https://github.com/Astrophysics-UCL/HPCInfo](https://github.com/Astrophysics-UCL/HPCInfo) using git

In splinter we have an issue with using git. You will need to set a environment variable `GIT_SSL_NO_VERIFY` to `true`. Then it will work okay :) Below is an example.

    $ module load versioning/nov2014/git-2.1.3
    $ cd a_directory_you_like
    $ setenv GIT_SSL_NO_VERIFY true
    $ git clone https://github.com/Astrophysics-UCL/HPCInfo.git
